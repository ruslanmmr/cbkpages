{"version":3,"sources":["common.js"],"names":["$","document","ready","lazy","nav","search","cover","asideNav","resize","innerWidth","flag","$navButton","navButtonActive","$mainNav","$asideNav","isMain","is","visibleOnly","threshold","effect","effectTime","event","preventDefault","toggleClass","nav1State","hasClass","slideUp","slideDown","window","removeClass","show","hide","button","input","formBlock","state","fadeIn","fadeOut","e","target","mouseup","has","length","on","addClass","each","th","this","height","im","children","ih","width","iw","gallery","$sliderFor","$sliderNav","slick","slidesToShow","slidesToScroll","arrows","asNavFor","lazyLoad","dots","focusOnSelect","prevArrow","nextArrow","responsive","breakpoint","settings","$link","siblings","$dropdown","href","location","pathname","currentPage","concat","parents","find"],"mappings":"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","file":"../common.min.js","sourcesContent":["$(document).ready(function () {\r\n  lazy();\r\n  nav();\r\n  search();\r\n  cover();\r\n  gallery();\r\n  asideNav();\r\n});\r\n$(window).resize(function () {\r\n  innerWidth = $('body').innerWidth();\r\n});\r\n\r\n//global variables\r\nvar innerWidth = $('body').innerWidth(),\r\n$navButton = $('.mobile-button'),\r\nnavButtonActive = 'mobile-button_active',\r\n$mainNav = $('.header .nav'),\r\n$asideNav = $('.aside-nav'),\r\nflag,\r\n// главная / второстепенная страницы\r\nisMain = $('*').is('.page_main');\r\n\r\n\r\n//lazy\r\nfunction lazy() {\r\n  $(\".lazy\").Lazy({\r\n    visibleOnly: true,\r\n    threshold: '',\r\n    effect: 'fadeIn',\r\n    effectTime: '300'\r\n  });\r\n}\r\n\r\n//nav\r\nfunction nav() {\r\n  $navButton.click(function (event) {\r\n    event.preventDefault();\r\n    $navButton.toggleClass(navButtonActive);\r\n    // если на главной странице - работаем с главным меню\r\n    if (isMain) {\r\n      nav1State();\r\n    }\r\n    // если на второстепенной - работаем с сайдбаром\r\n    else {\r\n      nav2State();\r\n    }\r\n  })\r\n\r\n  function nav1State() {\r\n    if ($navButton.hasClass(navButtonActive)) {\r\n      $mainNav.slideDown(300);\r\n    } else {\r\n      $mainNav.slideUp(300);\r\n    }\r\n  }\r\n  function nav2State() {\r\n    if ($navButton.hasClass(navButtonActive)) {\r\n      $asideNav.slideDown(300);\r\n    } else {\r\n      $asideNav.slideUp(300);\r\n    }\r\n  }\r\n\r\n  $(window).resize(function () {\r\n    if (innerWidth > 768) {\r\n      if(flag) {\r\n        $navButton.removeClass(navButtonActive);\r\n        if (isMain) {\r\n          $mainNav.show();\r\n        } else {\r\n          $asideNav.show();\r\n        }\r\n        flag = false;\r\n      }\r\n    } else {\r\n      if(!flag) {\r\n        if (isMain) {\r\n          $mainNav.hide();\r\n        } else {\r\n          $asideNav.hide();\r\n        }\r\n        flag = true;\r\n      }\r\n    }\r\n  });\r\n}\r\n// поиск\r\nfunction search() {\r\n    var button = $('.buttons__overlay'),\r\n        input = $('.buttons__input'),\r\n        formBlock = $('.buttons__form');\r\n\r\n      //скрываем если клик был вне формы\r\n      $(document).mouseup(function (e){\r\n        if (formBlock.hasClass('buttons__form_active') && !formBlock.is(e.target) \r\n            && formBlock.has(e.target).length === 0) { \r\n              formBlock.removeClass('buttons__form_active');\r\n              state(); \r\n        }\r\n      });\r\n\r\n    button.on('click, mouseenter', function(){\r\n      formBlock.addClass('buttons__form_active');\r\n      state();\r\n    })\r\n    formBlock.on('mouseleave', function(){\r\n      formBlock.removeClass('buttons__form_active');\r\n      state();\r\n    })\r\n    //проверка состояния формы\r\n    function state() {\r\n      if(formBlock.hasClass('buttons__form_active')) {\r\n        input.fadeIn(300);\r\n        button.hide();\r\n      } else {\r\n        input.fadeOut(300);\r\n        button.show();\r\n      }\r\n    }\r\n}\r\n//images\r\nfunction cover() {\r\n  $('.cover-box').each(function() {\r\n    //set size\r\n    var th = $(this).height(),//box height\r\n        tw = $(this).width(),//box width\r\n        im = $(this).children('img'),//image\r\n        ih = im.height(),\r\n        iw = im.width();\r\n    if ((tw/th) >= (iw/ih)) {\r\n        im.addClass('ww').removeClass('wh');\r\n    } else {\r\n        im.addClass('wh').removeClass('ww');\r\n    }\r\n  });\r\n}\r\nfunction gallery() {\r\n  if ($('.gallery').length){\r\n    var $sliderFor = $('.gallery-slider'),\r\n        $sliderNav = $('.gallery-slider-nav');\r\n\r\n    \r\n\r\n    $sliderFor.slick({\r\n      slidesToShow: 1,\r\n      slidesToScroll: 1,\r\n      arrows: false,\r\n      fade: true,\r\n      asNavFor: $sliderNav,\r\n      lazyLoad: 'ondemand'\r\n    });\r\n    $sliderNav.slick({\r\n      slidesToShow: 4,\r\n      slidesToScroll: 1,\r\n      asNavFor: $sliderFor,\r\n      dots: false,\r\n      focusOnSelect: true,\r\n      arrows: true,\r\n      lazyLoad: 'ondemand',\r\n      prevArrow: '.gallery-button_prev',\r\n      nextArrow: '.gallery-button_next',\r\n      responsive: [\r\n        {\r\n          breakpoint: 992,\r\n          settings: {\r\n            slidesToShow: 3\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 576,\r\n          settings: {\r\n            slidesToShow: 2\r\n          }\r\n        }\r\n      ]\r\n    });\r\n  }\r\n}\r\nfunction asideNav() {\r\n  var $link = $('.aside-nav__link'),\r\n      $dropdown = $('.aside-nav__list_dropdown');\r\n\r\n  $link.on('click', function(e) {\r\n    if($(this).siblings('.aside-nav__list_dropdown').length) {\r\n      e.preventDefault();\r\n      $(this).toggleClass('active');\r\n      state();\r\n    }\r\n  })\r\n\r\n  function state() {\r\n    $dropdown.each(function() {\r\n      if ($(this).siblings($link).hasClass('active')) {\r\n        $(this).slideDown();\r\n      } else {\r\n        $(this).slideUp();\r\n      }\r\n    })\r\n  }\r\n\r\n  //костыль для статики, извиняюсь\r\n  var href = document.location.pathname,\r\n  currentPage = $(`.aside-nav__link[href='${href}']`);\r\n  currentPage.addClass('active');\r\n  currentPage.parents('.aside-nav__item').find('.aside-nav__link:first').addClass('active');\r\n  currentPage.parents('.aside-nav__list_dropdown').show();\r\n}"]}